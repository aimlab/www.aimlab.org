<!DOCTYPE html><!--[if lt IE 7]>
<html lang="en" class="ie ie6"></html><![endif]--><!--[if IE 7]>
<html lang="en" class="ie ie7"></html><![endif]--><!--[if IE 8]>
<html lang="en" class="ie ie8"></html><![endif]--><!--[if (gte IE 9)|!(IE)]>
<html lang="en"></html>
<head>
  <!-- Basic Page Needs-->
  <meta charset="utf-8">
  <title>Karma - Travis CI</title>
  <!-- Mobile specific Metas-->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- Le styles-->
  <link href="/assets/css/app.css" rel="stylesheet">
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements--><!--[if lt IE 9]>
  <script src="/assets/js/html5.js"></script><![endif]-->
  <!-- Fav and touch icons-->
  <link rel="shortcut icon" href="/assets/img/favicon/favicon.ico">
  <link rel="apple-touch-icon" href="/assets/img/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/img/apple-touch-icon-144x144.png">
</head>
<body>
  <div id="wrap" class="boxed">
    <header>
      <div class="container clearfix">
        <div class="six columns">
          <div class="logo"><a href="/cn/index.html">互联网与系统实验室</a></div>
        </div>
        <div class="ten columns">
          <nav id="menu" class="navigation">
            <ul id="nav">
              <li><a href="javascript:void" class="">动态</a>
                <ul>
                  <li><a href="/cn/news/contributing.html">Contributing</a></li>
                </ul>
              </li>
              <li><a href="javascript:void" class="">项目</a>
                <ul>
                  <li><a href="/cn/project/system-and-web-security.html">系统与 Web 安全</a></li>
                  <li><a href="/cn/project/heterogeneous-computing.html">GPU 异构计算</a></li>
                </ul>
              </li>
              <li><a href="javascript:void" class="">发表</a>
                <ul>
                  <li><a href="/cn/publication/configuration-file.html">Configuration File</a></li>
                  <li><a href="/cn/publication/files.html">Files</a></li>
                  <li><a href="/cn/publication/browsers.html">Browsers</a></li>
                  <li><a href="/cn/publication/preprocessors.html">Preprocessors</a></li>
                  <li><a href="/cn/publication/plugins.html">Plugins</a></li>
                </ul>
              </li>
              <li><a href="javascript:void" class="active">团队</a>
                <ul>
                  <li><a href="/cn/team/requirejs.html">RequireJS</a></li>
                  <li><a href="/cn/team/travis.html">Travis CI</a></li>
                  <li><a href="/cn/team/jenkins.html">Jenkins CI</a></li>
                  <li><a href="/cn/team/semaphore.html">Semaphore CI</a></li>
                  <li><a href="/cn/team/cloud9.html">Cloud9</a></li>
                  <li><a href="/cn/team/angularjs.html">AngularJS</a></li>
                  <li><a href="/cn/team/yeoman.html">Yeoman</a></li>
                  <li><a href="/cn/team/emberjs.html">Ember.js</a></li>
                </ul>
              </li>
              <li><a href="javascript:void" class="">教学</a>
                <ul>
                  <li><a href="/cn/course/public-api.html">Public Api</a></li>
                  <li><a href="/cn/course/plugins.html">Plugins</a></li>
                  <li><a href="/cn/course/contributing.html">Contributing</a></li>
                </ul>
              </li>
              <li><a href="javascript:void">中文</a>
                <ul>
                  <li><a href="/cn/index.html">中文</a></li>
                  <li><a href="/en/index.html">en</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
        <div class="sixteen columns">
          <hr>
        </div>
      </div>
    </header>
    <div class="container clearfix">
      <div class="sixteen columns">
        <h1 class="page-title">Travis CI<span class="line"></span>
        </h1>
      </div>
      <div class="page-columns">
        <div id="markdown" class="sixteen columns bottom"><p><a href="https://travis-ci.org/">Travis CI</a> is a popular continuous integration service that
integrates with your <a href="https://github.com/">Github</a> repository to automatically run your
tests when code is pushed. Integration is done by adding a simple
<a href="http://www.yaml.org/">YAML</a> file to your project root; Travis and Github take care of the
rest. Whenever tested, the Travis results will appear in your Github pull requests and your
history will be available within their control panel. This article assumes you
already have Travis account.</p>
<h2>Configure Travis</h2>
<p>Create a file in your project root called <code>.travis.yml</code> with the
following YAML content:</p>
<pre><code class="language-ruby"><span class="hljs-symbol">language:</span> node_js
<span class="hljs-symbol">node_js:</span>
  - <span class="hljs-number">0</span>.<span class="hljs-number">8</span></code></pre>
<h2>Setup a Test Command</h2>
<p>If you do not already have a <code>package.json</code> in your project root
create one now. Travis runs <code>npm test</code> to trigger your tests so this
is where you tell Travis how to run your tests.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// ...snip...</span>
<span class="hljs-string">'devDependencies'</span>: {
  <span class="hljs-string">'karma'</span>: <span class="hljs-string">'~0.10'</span>
},
<span class="hljs-comment">// ...snip...</span>
<span class="hljs-string">'scripts'</span>: {
   <span class="hljs-string">'test'</span>: <span class="hljs-string">'./node_modules/.bin/karma start --single-run --browsers PhantomJS'</span>
}
<span class="hljs-comment">// ...snip...</span></code></pre>
<p>Travis will run <code>npm install</code> before every suite so this is your
chance to specify any modules your app needs that Travis does not know
about like Karma.</p>
<h2>Configure Travis with Firefox</h2>
<p>Travis supports running a real browser (Firefox) with a virtual
screen. Just update your <code>.travis.yml</code> to set up the virtual screen
like this:</p>
<pre><code class="language-ruby"><span class="hljs-symbol">language:</span> node_js
<span class="hljs-symbol">node_js:</span>
  - <span class="hljs-number">0</span>.<span class="hljs-number">8</span>
<span class="hljs-symbol">before_script:</span>
  - export <span class="hljs-constant">DISPLAY</span>=<span class="hljs-symbol">:</span><span class="hljs-number">99.0</span>
  - sh -e /etc/init.d/xvfb start</code></pre>
<p>And now, you can run your tests on Firefox, just change the <code>npm test</code>
command to</p>
<pre><code class="language-bash">./node_modules/.bin/karma start --browsers Firefox --single-run</code></pre>
<h2>Notes</h2>
<ul>
<li>Travis&#39; Node environment has very little available. If the startup
process in Travis fails check for missing module information and be
sure to add them to your <code>package.json</code> dependencies.</li>
<li>Travis does not run in your local network so any code that attempts
to connect to resources should be stubbed out using <a href="https://github.com/flatiron/nock">Nock</a>.</li>
<li>There are more options available to your <code>.travis.yml</code>, such as
running scripts before the install or test run. There are hints in
the Travis docs for <a href="http://about.travis-ci.org/docs/user/gui-and-headless-browsers/">GUI apps</a> configuration.</li>
</ul>

        </div>
      </div>
    </div>
    <div class="push"></div>
  </div>
  <footer>
    <div class="container">
      <div class="ten columns"><span class="copyright">
          © 2015 A.I.M Lab 互联网与系统实验室
          . Theme by&nbsp;<a href="http://karma-runner.github.io/">Karma</a>.</span></div>
      <div class="six columns">
        <div class="social"><a href="https://github.com/aimlab" data-tooltip="GitHub Repo"><i class="icon-github-alt icon-large"></i></a><a href="mailto:haochen@aimlab.org" data-tooltip="Mailing List"><i class="icon-envelope-alt icon-large"></i></a></div>
      </div>
    </div>
  </footer>
</body>
<!-- Placed at the end of the document so the pages load faster-->
<script src="/assets/js/app.js">;</script>
<!-- Google Analytics-->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46195299-1']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script><![endif]-->